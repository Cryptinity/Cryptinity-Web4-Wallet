<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Cryptinity Web4 | Safe Zone</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* --- CORE THEME --- */
        :root {
            --neon: #ccff00;
            --bg-dark: #050505;
            --glass-border: rgba(255, 255, 255, 0.08);
            --sidebar-width: 260px;
        }

        body {
            background-color: black;
            color: white;
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* App-like behavior */
            margin: 0; padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .safe-pt { padding-top: max(20px, env(safe-area-inset-top)); }
        .safe-pb { padding-bottom: max(20px, env(safe-area-inset-bottom)); }

        /* --- BACKGROUNDS --- */
        .cyber-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: 
                radial-gradient(circle at 10% 20%, rgba(204, 255, 0, 0.03) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(204, 255, 0, 0.02) 0%, transparent 40%),
                #000;
        }

        /* Glassmorphism */
        .glass-panel {
            background: rgba(12, 12, 12, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
        }

        .glass-chart {
            background: linear-gradient(180deg, rgba(20, 20, 20, 0.8) 0%, rgba(0, 0, 0, 0.9) 100%);
            border: 1px solid rgba(255,255,255,0.05);
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
        }

        /* Chart SVG */
        .chart-line {
            fill: none; stroke: var(--neon); stroke-width: 3; stroke-linecap: round;
            filter: drop-shadow(0 0 8px rgba(204, 255, 0, 0.4));
        }
        .chart-area { fill: url(#gradientArea); opacity: 0.3; }

        /* Logo Fitting */
        .cty-logo-container {
            width: 40px; height: 40px; border-radius: 50%; background: #000;
            display: flex; align-items: center; justify-content: center;
            border: 1px solid rgba(255,255,255,0.1); flex-shrink: 0; overflow: hidden;
        }
        .cty-logo-img { width: 100%; height: 100%; object-fit: cover; transform: scale(1.1); }

        /* --- LAYOUT ARCHITECTURE --- */
        .screen { display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; }
        .screen.active { display: flex; flex-direction: column; animation: fadeIn 0.4s ease; }

        /* Mobile First Layout */
        #app-layout {
            display: flex; flex-direction: column; height: 100vh; width: 100%;
        }
        #main-content {
            flex: 1; overflow-y: auto; overflow-x: hidden; position: relative;
        }
        
        /* Desktop Grid Layout */
        @media (min-width: 1024px) {
            #app-layout { flex-direction: row; }
            #mobile-nav { display: none !important; }
            #desktop-sidebar { display: flex !important; width: var(--sidebar-width); flex-shrink: 0; }
            #main-content { padding: 2rem; }
            .dashboard-grid {
                display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;
                max-width: 1400px; margin: 0 auto; height: 100%;
            }
            .chart-section { height: 100%; display: flex; flex-direction: column; }
            #main-chart-container { flex: 1; min-height: 400px; }
        }

        /* Scrollbar Hiding */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Whitepaper Typography */
        .wp-h1 { color: var(--neon); font-size: 1.5rem; font-weight: 800; margin: 1.5rem 0 1rem; }
        .wp-h2 { color: white; font-size: 1.1rem; font-weight: 700; margin: 1.2rem 0 0.5rem; }
        .wp-p { color: #9ca3af; font-size: 0.9rem; line-height: 1.6; margin-bottom: 0.8rem; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>

    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, setDoc, collection, query, orderBy } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyA07f3kuyjbvlHi5nxFFhRKARw9yP0R9GI",
            authDomain: "cryptinity-7967a.firebaseapp.com",
            databaseURL: "https://cryptinity-7967a-default-rtdb.firebaseio.com",
            projectId: "cryptinity-7967a",
            storageBucket: "cryptinity-7967a.firebasestorage.app",
            messagingSenderId: "934037242924",
            appId: "1:934037242924:web:d6dd86f6d6dc7ee64a3d89"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const googleProvider = new GoogleAuthProvider();

        // GLOBAL STATE
        window.state = {
            currentAsset: 'BTC',
            rates: { USDT: 1, BTC: 65000, ETH: 3500, BNB: 600, SOL: 150, CTY: 0.0004 },
            assets: {
                CTY: { name: 'Cryptinity', id: 'cryptinity', icon: 'https://res.cloudinary.com/db8haqiqq/image/upload/v1765028706/9527-removebg-preview_rlecfz.png' },
                BTC: { name: 'Bitcoin', id: 'bitcoin', icon: 'https://res.cloudinary.com/db8haqiqq/image/upload/v1765114062/logaster-2022-08-bitcoin-logo-2010-by-satoshi-nakamoto-min_mqu56d.jpg' },
                ETH: { name: 'Ethereum', id: 'ethereum', icon: 'https://res.cloudinary.com/db8haqiqq/image/upload/v1765114102/ethereum-eth-logo-png_seeklogo-444507_dcjtpk.png' },
                BNB: { name: 'Binance Coin', id: 'binancecoin', icon: 'https://res.cloudinary.com/db8haqiqq/image/upload/v1765114055/binance-logo-6219389_640_o1bvbi.png' },
                SOL: { name: 'Solana', id: 'solana', icon: 'https://res.cloudinary.com/db8haqiqq/image/upload/v1765114056/Solana-Logo-300x300_oa0rqg.png' },
                USDT: { name: 'Tether', id: 'tether', icon: 'https://res.cloudinary.com/db8haqiqq/image/upload/v1765114068/USDT_Logo_pqvywr.png' }
            },
            balances: {}
        };

        // --- AUTH ---
        window.loginEmail = async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            try { await signInWithEmailAndPassword(auth, email, pass); } 
            catch { try { await createUserWithEmailAndPassword(auth, email, pass); } catch(err){ alert(err.message); } }
        };
        window.loginGoogle = async () => { try { await signInWithPopup(auth, googleProvider); } catch(e){ alert("Enable Google in Firebase Console"); } };
        window.loginGuest = async () => { await signInAnonymously(auth); };

        onAuthStateChanged(auth, (user) => {
            if (user) {
                initData(user);
                showScreen('app-screen');
            } else {
                // Safety timeout handled in onload
            }
        });

        // --- DATA & LOGIC ---
        function initData(user) {
            onSnapshot(doc(db, 'artifacts', firebaseConfig.projectId, 'users', user.uid, 'wallet', 'balances'), (doc) => {
                if (doc.exists()) window.state.balances = doc.data();
                else setDoc(doc.ref, { CTY: 0, BTC: 0, ETH: 0, BNB: 0, SOL: 0, USDT: 0 });
                renderAssets();
            });
            onSnapshot(query(collection(db, 'artifacts', firebaseConfig.projectId, 'users', user.uid, 'transactions'), orderBy('timestamp', 'desc')), (snap) => {
                renderHistory(snap.docs.map(d=>d.data()));
            });
            fetchPrices();
        }

        async function fetchPrices() {
            try {
                const ids = Object.values(window.state.assets).filter(a=>a.id!=='cryptinity').map(a=>a.id).join(',');
                const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd`);
                const data = await res.json();
                Object.keys(window.state.assets).forEach(k => {
                    const id = window.state.assets[k].id;
                    if(data[id]) window.state.rates[k] = data[id].usd;
                });
                renderAssets();
                updateTotal();
            } catch(e) { console.warn("Price API Error", e); }
        }

        // --- CHART ENGINE ---
        window.loadChart = async (key) => {
            window.state.currentAsset = key;
            const asset = window.state.assets[key];
            document.getElementById('chart-icon').src = asset.icon;
            document.getElementById('chart-name').innerText = asset.name;
            document.getElementById('chart-price').innerText = "Loading...";

            // CTY/USDT Fake Logic
            if(key === 'CTY' || key === 'USDT') {
                const p = key==='CTY'?0.0004:1.00;
                document.getElementById('chart-price').innerText = '$'+p;
                drawChart(Array(24).fill(0).map(()=>p+(Math.random()*p*0.02)));
                return;
            }

            // Real Data
            try {
                const res = await fetch(`https://api.coingecko.com/api/v3/coins/${asset.id}/market_chart?vs_currency=usd&days=1`);
                const json = await res.json();
                const prices = json.prices.map(p=>p[1]);
                const clean = prices.filter((_,i)=>i%5===0).slice(-40);
                drawChart(clean);
                document.getElementById('chart-price').innerText = '$'+prices[prices.length-1].toLocaleString();
            } catch(e) { 
                drawChart([10,12,11,14,13,15,16]); // Fallback 
            }
        };

        function drawChart(data) {
            const svg = document.getElementById('main-chart');
            const w = svg.clientWidth || 350, h = svg.clientHeight || 200;
            const min = Math.min(...data), max = Math.max(...data), range = max-min || 1;
            
            const points = data.map((v,i) => {
                const x = (i/(data.length-1))*w;
                const y = h - ((v-min)/range)*(h*0.7) - (h*0.15);
                return {x,y};
            });

            // Spline Logic
            let d = `M${points[0].x},${points[0].y}`;
            for (let i=0; i<points.length-1; i++) {
                const p0=points[Math.max(i-1,0)], p1=points[i], p2=points[i+1], p3=points[Math.min(i+2,points.length-1)];
                const cp1x = p1.x+(p2.x-p0.x)/6, cp1y = p1.y+(p2.y-p0.y)/6;
                const cp2x = p2.x-(p3.x-p1.x)/6, cp2y = p2.y-(p3.y-p1.y)/6;
                d += ` C${cp1x},${cp1y} ${cp2x},${cp2y} ${p2.x},${p2.y}`;
            }

            document.getElementById('chart-path').setAttribute('d', d);
            document.getElementById('chart-fill').setAttribute('d', `${d} L${w},${h} L0,${h} Z`);
            document.getElementById('chart-dot').setAttribute('cx', points[points.length-1].x);
            document.getElementById('chart-dot').setAttribute('cy', points[points.length-1].y);
        }

        // --- RENDERERS ---
        function renderAssets() {
            const list = document.getElementById('assets-list');
            list.innerHTML = '';
            Object.keys(window.state.assets).forEach(k => {
                const a = window.state.assets[k];
                const bal = window.state.balances[k] || 0;
                const val = bal * (window.state.rates[k]||0);
                const isActive = window.state.currentAsset === k;
                
                list.innerHTML += `
                <div onclick="loadChart('${k}')" class="flex items-center justify-between p-4 rounded-xl border mb-2 cursor-pointer transition-all ${isActive ? 'bg-zinc-800 border-[#ccff00]' : 'bg-zinc-900/50 border-zinc-800/50 hover:bg-zinc-800'}">
                    <div class="flex items-center gap-3">
                        <div class="cty-logo-container"><img src="${a.icon}" class="cty-logo-img"></div>
                        <div><div class="font-bold text-white">${a.name} ${k==='CTY'?'<span class="text-[10px] bg-[#ccff00]/20 text-[#ccff00] px-1 rounded">LOCKED</span>':''}</div><div class="text-xs text-zinc-500">$${(window.state.rates[k]||0).toLocaleString()}</div></div>
                    </div>
                    <div class="text-right"><div class="font-bold text-white">$${val.toLocaleString()}</div><div class="text-xs text-zinc-500">${bal.toFixed(4)} ${k}</div></div>
                </div>`;
            });
        }

        function updateTotal() {
            let sum = 0;
            Object.keys(window.state.balances).forEach(k => sum += (window.state.balances[k]||0)*(window.state.rates[k]||0));
            document.getElementById('total-balance').innerText = '$'+sum.toLocaleString();
        }

        function renderHistory(txs) {
            const el = document.getElementById('history-list');
            if(!txs.length) { el.innerHTML='<div class="text-center text-zinc-600 py-10">No transactions</div>'; return; }
            el.innerHTML = txs.map(t => `
                <div class="flex justify-between items-center p-4 bg-zinc-900/50 border border-zinc-800 rounded-xl mb-2">
                    <div class="flex items-center gap-3">
                        <div class="p-2 rounded-full ${t.type==='deposit'?'bg-[#ccff00]/20 text-[#ccff00]':'bg-zinc-800 text-white'}"><i data-lucide="${t.type==='deposit'?'arrow-down-left':'arrow-up-right'}"></i></div>
                        <div><div class="font-bold capitalize text-sm">${t.type}</div><div class="text-[10px] text-zinc-500">Confirmed</div></div>
                    </div>
                    <div class="text-right font-bold text-sm">${t.amount} ${t.asset}</div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        // --- NAVIGATION ---
        window.switchView = (view) => {
            ['home','swap','history'].forEach(v => document.getElementById('view-'+v).classList.add('hidden'));
            document.getElementById('view-'+view).classList.remove('hidden');
            // Nav State
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('text-[#ccff00]'));
            document.querySelectorAll(`[data-nav="${view}"]`).forEach(el => el.classList.add('text-[#ccff00]'));
            if(view==='home') { loadChart(window.state.currentAsset); setTimeout(loadChart, 100, window.state.currentAsset); } // Resize fix
        };

        window.openClaim = () => document.getElementById('claim-overlay').style.display = 'flex';
        window.closeClaim = () => document.getElementById('claim-overlay').style.display = 'none';
        
        window.openModal = (id) => document.getElementById(id).style.display = 'flex';
        window.closeModal = (id) => document.getElementById(id).style.display = 'none';

        // INIT
        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = 'flex';
            if(id === 'app-screen') {
                lucide.createIcons();
                loadChart('BTC');
                window.dispatchEvent(new Event('resize'));
            }
        }

        window.onload = () => {
            if(window.lucide) lucide.createIcons();
            // Fallback timer if Auth fails
            setTimeout(() => {
                if(!auth.currentUser) {
                    document.getElementById('intro-screen').style.display = 'none';
                    showScreen('auth-screen');
                }
            }, 3000);
            window.addEventListener('resize', ()=>loadChart(window.state.currentAsset));
        }
    </script>
</head>
<body>

    <!-- BACKGROUND -->
    <div class="cyber-bg"></div>

    <!-- 1. INTRO SCREEN -->
    <div id="intro-screen" class="fixed inset-0 z-50 bg-black flex flex-col items-center justify-center">
        <div class="relative animate-bounce">
            <div class="absolute inset-0 bg-[#ccff00] blur-xl opacity-20 rounded-full"></div>
            <i data-lucide="shield" class="w-24 h-24 text-[#ccff00] relative z-10"></i>
        </div>
        <h1 class="text-3xl font-bold tracking-widest font-mono mt-8">CRYPTINITY</h1>
        <p class="text-[#ccff00] text-sm tracking-[0.3em] uppercase mt-2 animate-pulse">Entering Safe Zone...</p>
    </div>

    <!-- 2. AUTH SCREEN -->
    <div id="auth-screen" class="screen items-center justify-center p-6">
        <div class="w-full max-w-sm glass-panel p-8 rounded-3xl text-center border border-[#ccff00]/30 shadow-[0_0_50px_rgba(204,255,0,0.1)]">
            <div class="w-20 h-20 bg-black rounded-full flex items-center justify-center mx-auto mb-6 border-2 border-[#ccff00] shadow-[0_0_20px_#ccff00]">
                <i data-lucide="globe" class="w-10 h-10 text-[#ccff00]"></i>
            </div>
            <h2 class="text-3xl font-bold mb-2 text-white">Web4 Connect</h2>
            <p class="text-zinc-400 text-sm mb-8">Secure Neural Interface</p>
            <form onsubmit="loginEmail(event)" class="space-y-4">
                <input id="email" type="email" placeholder="Identity Node" class="w-full bg-black/50 border border-zinc-700 rounded-xl p-3 text-white focus:border-[#ccff00] outline-none">
                <input id="password" type="password" placeholder="Passkey" class="w-full bg-black/50 border border-zinc-700 rounded-xl p-3 text-white focus:border-[#ccff00] outline-none">
                <button type="submit" class="w-full bg-[#ccff00] text-black font-bold py-3.5 rounded-xl hover:shadow-[0_0_20px_#ccff00] transition-all">CONNECT</button>
            </form>
            <div class="flex items-center gap-4 my-6"><div class="h-px bg-zinc-800 flex-1"></div><span class="text-xs text-zinc-500">OR</span><div class="h-px bg-zinc-800 flex-1"></div></div>
            <button onclick="loginGoogle()" class="w-full bg-white text-black font-bold py-3 rounded-xl mb-3 flex justify-center gap-2 items-center"><img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5"> Google Access</button>
            <button onclick="loginGuest()" class="w-full border border-zinc-700 text-zinc-300 font-bold py-3 rounded-xl hover:bg-zinc-800"><i data-lucide="ghost" class="w-4 h-4 inline mr-2"></i> Guest Protocol</button>
        </div>
    </div>

    <!-- 3. APP SCREEN (Responsive Layout) -->
    <div id="app-screen" class="screen">
        <div id="app-layout">
            
            <!-- DESKTOP SIDEBAR -->
            <div id="desktop-sidebar" class="hidden bg-black border-r border-zinc-800 flex-col p-6">
                <div class="flex items-center gap-3 mb-10 text-[#ccff00]">
                    <i data-lucide="shield" class="w-8 h-8"></i>
                    <span class="font-bold text-xl tracking-wider">CRYPTINITY</span>
                </div>
                <nav class="flex flex-col gap-2 flex-1">
                    <button onclick="switchView('home')" data-nav="home" class="nav-item flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-900 text-[#ccff00] font-bold"><i data-lucide="wallet"></i> Dashboard</button>
                    <button onclick="switchView('swap')" data-nav="swap" class="nav-item flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-900 text-zinc-400 font-bold"><i data-lucide="arrow-right-left"></i> Exchange</button>
                    <button onclick="switchView('history')" data-nav="history" class="nav-item flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-900 text-zinc-400 font-bold"><i data-lucide="history"></i> History</button>
                    <button onclick="openClaim()" class="nav-item flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-900 text-zinc-400 font-bold"><i data-lucide="gift"></i> Airdrop</button>
                </nav>
                <button onclick="openModal('wp-modal')" class="border border-zinc-800 p-3 rounded-xl text-zinc-400 hover:text-white text-sm font-bold flex items-center justify-center gap-2"><i data-lucide="file-text" class="w-4 h-4"></i> White Paper</button>
            </div>

            <!-- MAIN CONTENT -->
            <div id="main-content">
                
                <!-- Mobile Header -->
                <div class="lg:hidden flex justify-between items-center p-4 bg-black/90 backdrop-blur sticky top-0 z-30 border-b border-zinc-800 mb-4 safe-pt">
                    <div class="flex items-center gap-2 text-[#ccff00]"><i data-lucide="shield" class="w-6 h-6"></i><span class="font-bold tracking-wider">CRYPTINITY</span></div>
                    <button onclick="openModal('wp-modal')" class="p-2 bg-zinc-900 rounded-full border border-zinc-800"><i data-lucide="file-text" class="w-5 h-5 text-zinc-400"></i></button>
                </div>

                <!-- VIEW: HOME -->
                <div id="view-home" class="dashboard-grid h-full">
                    
                    <!-- Left Column -->
                    <div class="chart-section gap-6">
                        <div class="flex justify-between items-end px-2">
                            <div><p class="text-zinc-500 text-xs uppercase mb-1">Total Balance</p><h1 id="total-balance" class="text-4xl lg:text-5xl font-bold text-white">$0.00</h1></div>
                            <div class="bg-[#ccff00]/10 text-[#ccff00] text-xs px-3 py-1 rounded-full border border-[#ccff00]/20 flex gap-1 items-center"><i data-lucide="trending-up" class="w-3 h-3"></i> +2.4%</div>
                        </div>

                        <!-- Chart -->
                        <div class="glass-chart rounded-3xl p-6 relative overflow-hidden w-full" id="main-chart-container">
                            <div class="flex justify-between mb-4">
                                <div class="flex items-center gap-3">
                                    <img id="chart-icon" src="" class="w-8 h-8 rounded-full">
                                    <div><p id="chart-name" class="text-sm font-bold text-zinc-300">Bitcoin</p><p id="chart-price" class="text-xl font-mono font-bold leading-none">$0.00</p></div>
                                </div>
                                <span class="text-xs bg-zinc-800 px-2 py-1 rounded border border-zinc-700 text-zinc-400 h-fit">24H</span>
                            </div>
                            <svg id="main-chart" class="w-full h-full" style="max-height: 80%;" preserveAspectRatio="none">
                                <defs><linearGradient id="gradientArea" x1="0" x2="0" y1="0" y2="1"><stop offset="0%" stop-color="#ccff00" stop-opacity="0.2"/><stop offset="100%" stop-color="#ccff00" stop-opacity="0"/></linearGradient></defs>
                                <path id="chart-fill" class="chart-area" d="" />
                                <path id="chart-path" class="chart-line" d="" />
                                <circle id="chart-dot" r="6" fill="#000" stroke="#ccff00" stroke-width="3" />
                            </svg>
                        </div>

                        <!-- Quick Actions -->
                        <div class="grid grid-cols-4 gap-4">
                            <button onclick="openModal('feature-modal')" class="p-4 bg-zinc-900/50 rounded-2xl border border-zinc-800/50 flex flex-col items-center gap-2 hover:bg-zinc-800"><div class="w-10 h-10 rounded-full bg-[#ccff00] flex items-center justify-center text-black"><i data-lucide="arrow-down-left"></i></div><span class="text-xs font-bold text-zinc-300">Deposit</span></button>
                            <button onclick="openModal('feature-modal')" class="p-4 bg-zinc-900/50 rounded-2xl border border-zinc-800/50 flex flex-col items-center gap-2 hover:bg-zinc-800"><div class="w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-white"><i data-lucide="arrow-up-right"></i></div><span class="text-xs font-bold text-zinc-300">Withdraw</span></button>
                            <button onclick="switchView('swap')" class="p-4 bg-zinc-900/50 rounded-2xl border border-zinc-800/50 flex flex-col items-center gap-2 hover:bg-zinc-800"><div class="w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-white"><i data-lucide="refresh-ccw"></i></div><span class="text-xs font-bold text-zinc-300">Swap</span></button>
                            <button onclick="openClaim()" class="p-4 bg-zinc-900/50 rounded-2xl border border-zinc-800/50 flex flex-col items-center gap-2 hover:bg-zinc-800"><div class="w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-[#ccff00]"><i data-lucide="gift"></i></div><span class="text-xs font-bold text-zinc-300">Claim</span></button>
                        </div>
                    </div>

                    <!-- Right Column (Assets) -->
                    <div class="flex flex-col gap-6 h-full pb-24 lg:pb-0">
                        <div class="bg-zinc-900/50 border border-zinc-800 rounded-2xl p-4 flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div class="p-2 bg-[#ccff00]/10 rounded-full"><i data-lucide="clock" class="text-[#ccff00]"></i></div>
                                <div><p class="text-[10px] text-zinc-400 uppercase font-bold">Safe Zone Unlock</p><p class="text-white font-mono font-bold">90d : 00h : 00m</p></div>
                            </div>
                        </div>
                        <div class="flex-1 bg-zinc-900/30 border border-zinc-800/50 rounded-3xl p-4 overflow-hidden flex flex-col">
                            <h3 class="font-bold text-lg mb-4 px-2">Live Assets</h3>
                            <div id="assets-list" class="flex-1 overflow-y-auto no-scrollbar space-y-2"></div>
                        </div>
                    </div>
                </div>

                <!-- VIEW: SWAP -->
                <div id="view-swap" class="hidden h-full flex flex-col items-center justify-center">
                    <div class="w-full max-w-md bg-zinc-900 p-8 rounded-3xl border border-zinc-800 text-center">
                        <h2 class="text-2xl font-bold mb-4">Atomic Swap</h2>
                        <div class="bg-black p-4 rounded-xl border border-zinc-800 mb-2 flex justify-between items-center"><span class="text-zinc-500">From</span><span class="font-bold">USDT</span></div>
                        <i data-lucide="arrow-down" class="mx-auto my-2 text-[#ccff00]"></i>
                        <div class="bg-black p-4 rounded-xl border border-zinc-800 mt-2 flex justify-between items-center"><span class="text-zinc-500">To</span><span class="font-bold">CTY</span></div>
                        <button class="w-full bg-zinc-800 text-zinc-500 font-bold py-4 rounded-xl mt-6">Insufficient Liquidity</button>
                    </div>
                </div>

                <!-- VIEW: HISTORY -->
                <div id="view-history" class="hidden h-full">
                    <h2 class="font-bold text-xl mb-4 px-4">Recent Activity</h2>
                    <div id="history-list" class="max-w-2xl mx-auto px-4"></div>
                </div>

            </div>

            <!-- MOBILE NAV -->
            <div id="mobile-nav" class="lg:hidden fixed bottom-0 w-full bg-black/90 backdrop-blur border-t border-zinc-800 flex justify-between px-8 py-4 safe-pb z-40">
                <button onclick="switchView('home')" data-nav="home" class="nav-item text-[#ccff00] flex flex-col items-center gap-1"><i data-lucide="wallet"></i><span class="text-[10px] font-bold">Wallet</span></button>
                <button onclick="switchView('swap')" data-nav="swap" class="nav-item text-zinc-600 flex flex-col items-center gap-1"><i data-lucide="arrow-right-left"></i><span class="text-[10px] font-bold">Swap</span></button>
                <button onclick="switchView('history')" data-nav="history" class="nav-item text-zinc-600 flex flex-col items-center gap-1"><i data-lucide="history"></i><span class="text-[10px] font-bold">History</span></button>
                <button onclick="openClaim()" class="nav-item text-zinc-600 flex flex-col items-center gap-1"><i data-lucide="gift"></i><span class="text-[10px] font-bold">Claim</span></button>
            </div>

        </div>
    </div>

    <!-- OVERLAYS -->
    
    <!-- 1. FULL SCREEN CLAIM -->
    <div id="claim-overlay" class="hidden fixed inset-0 z-[100] bg-black flex-col">
        <div class="flex justify-between items-center p-4 bg-zinc-900 border-b border-zinc-800 safe-pt">
            <div class="flex items-center gap-2"><i data-lucide="gift" class="text-[#ccff00]"></i><span class="font-bold">Airdrop Portal</span></div>
            <button onclick="closeClaim()" class="p-2 bg-zinc-800 rounded-full text-white"><i data-lucide="x"></i></button>
        </div>
        <iframe src="https://cryptinity.github.io/Sci-fi-Cryptinity-Web4/" class="flex-1 w-full border-0 bg-zinc-950"></iframe>
    </div>

    <!-- 2. WHITE PAPER MODAL -->
    <div id="wp-modal" class="hidden fixed inset-0 z-[110] bg-black/95 flex items-center justify-center p-4">
        <div class="bg-zinc-900 w-full max-w-2xl h-[80vh] rounded-2xl flex flex-col border border-zinc-800">
            <div class="p-4 border-b border-zinc-800 flex justify-between"><h2 class="font-bold text-lg">White Paper</h2><button onclick="closeModal('wp-modal')"><i data-lucide="x"></i></button></div>
            <div class="flex-1 overflow-y-auto p-6">
                <p class="text-[#ccff00] text-xs font-mono uppercase mb-4">Version 1.0 | 2025</p>
                <h1 class="wp-h1">THE ARCHITECTURE OF THE SAFE ZONE</h1>
                <h2 class="wp-h2">1. ABSTRACT</h2><p class="wp-p">Welcome to the Safe Zone. The internet is broken. Web2 sold your data; Web3 was too complex. Cryptinity Web4 is the next evolutionâ€”a "Sci-Fi Hybrid" ecosystem that unifies Social Interaction, High-Speed Finance, Digital Vaults, and Military-Grade Security into a single mobile application.</p>
                <h2 class="wp-h2">2. THE PROBLEM</h2><p class="wp-p"><strong>Social Manipulation:</strong> Social giants use predatory "Algorithms" to control what you see.</p><p class="wp-p"><strong>Security Failures:</strong> Centralized platforms are honey pots for hackers.</p>
                <h2 class="wp-h2">3. THE SOLUTION</h2><p class="wp-p"><strong>Pillar I: SOCIAL</strong> - Zero-Algorithm Protocol.</p><p class="wp-p"><strong>Pillar II: FINANCE</strong> - Hyper-Velocity Transactions via Solana PoH.</p><p class="wp-p"><strong>Pillar III: THE VAULT</strong> - Self-Custody Neo-Bank.</p>
                <h2 class="wp-h2">4. THE TOKEN: CTY</h2><p class="wp-p">Network: Solana (SPL Token-2022)<br>Total Supply: 1,000,000,000 CTY</p>
                <h2 class="wp-h2">5. CONCLUSION</h2><p class="wp-p">The era of slow banking is over. Welcome to the Safe Zone.</p>
            </div>
        </div>
    </div>

    <!-- 3. FEATURE MODAL -->
    <div id="feature-modal" class="hidden fixed inset-0 z-[120] bg-black/80 backdrop-blur flex items-center justify-center p-6">
        <div class="bg-zinc-900 w-full max-w-sm rounded-3xl p-8 border border-zinc-800 text-center">
            <div class="w-16 h-16 bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-6"><i data-lucide="construction" class="w-8 h-8 text-[#ccff00]"></i></div>
            <h3 class="text-2xl font-bold mb-2">Coming Soon</h3>
            <p class="text-zinc-500 text-sm mb-6">This feature is currently being audited for security.</p>
            <button onclick="closeModal('feature-modal')" class="w-full bg-white text-black font-bold py-3 rounded-xl">Close</button>
        </div>
    </div>

</body>
</html>
